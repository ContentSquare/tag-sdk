# Contentsquare TAG SDK

This NPM package offers developers a standardized way of loading Tracking TAG in a non-blocking way from remote
servers. Based on the [Contentsquare SDK](https://docs.contentsquare.com/uxa-en/).

Contentsquare is an analytics platform that helps businesses understand and optimize user experiences on their websites and mobile apps. It provides actionable insights through heatmaps, session recordings, and behavioral analytics, allowing businesses to identify areas for improvement and enhance overall website performance. With its user-friendly interface and powerful data visualization, Contentsquare enables data-driven decision-making to boost conversions and enhance customer engagement.


## Installation

Install the package using NPM:

```console
npm install --save @contentsquare/tag-sdk
```



-------------

## How to Use Contentsquare Tag


### Prerequisites

Before using the Contentsquare tag, make sure you have the following:

- **Contentsquare Account**: Sign up for a Contentsquare account on official website (https://www.contentsquare.com/) and obtain your client ID.

### Steps to Use Contentsquare Tag

Follow the steps below to use the Contentsquare tag on your website:

1. **Include the Contentsquare Script**: In your website's Javascript/Typescript, add the Contentsquare script using the provided client ID. Replace `YOUR_CLIENT_ID` with your actual Contentsquare client ID.

    Call the `injectContentsquareScript` function with the necessary options to append the Contentsquare script to the document.head.
    
    ```javascript
    // Replace 'YOUR_CLIENT_ID' with your actual Contentsquare client ID
    injectContentsquareScript({
      clientId: 'YOUR_CLIENT_ID',
      async: true, // Optional: Set to false to wait for script execution until after document parsing.
      defer: false, // Optional: Set to true to defer script execution after document parsing.
      integrity: 'YOUR_SCRIPT_INTEGRITY_HASH', // Optional: Provide the integrity hash for script security (if required).
    });
    ```
    
    The function will append the Contentsquare script to the document.head, and it will be fetched and executed accordingly based on the provided options.

2. **Trigger Page View Tracking**: Once the Contentsquare script is included on your website, it automatically tracks page views by default. No additional code is required to track basic page views.

3. **Track Custom Events**: Use the Contentsquare JavaScript API to track custom events on your website. For example, you can track clicks, form submissions, video interactions, and other user interactions. Refer to the Contentsquare documentation for details on how to use API.


```html
<!-- Example: Tracking a click event -->
<script>
    window._uxa = window._uxa || [];
    window._uxa.push(['trackEvent', 'CLICK_EVENT_NAME']);
</script>

```

4. **User Identification**: To associate user behavior with specific users, you can set the user ID using the `setUserId` method. This allows you to analyze the behavior of individual users in your analytics.

```html
<!-- Example: Setting the user ID -->
<script>
    window._uxa = window._uxa || [];
    window._uxa.push(['setUserId', 'USER_ID']);
</script>
```

5. **View Analytics Reports**: After implementing the Contentsquare tag on your website, you can log in to your Contentsquare account and access detailed analytics reports, including heatmaps, session replays, conversion funnels, and more.

## Additional Configuration (Optional)

The Contentsquare tag provides additional configuration options to customize your analytics tracking. Refer to the [Contentsquare documentation](https://docs.contentsquare.com/uxa-en/) for more information on configuring advanced settings, enabling specific modules, and handling specific use cases.

---


## API Reference

### `injectContentsquareScript(scriptOptions)`

Injects the Contentsquare script into the document.head.

- `scriptOptions`: Options for injecting the script.
  - `clientId` (string) - **(Required)** The client ID provided by Contentsquare in the form of 'a6f73d509'.
  - `defer` (boolean) - (Optional) Indicates if the script is fetched in parallel and evaluated after the document is parsed. Defaults to `false`.
  - `async` (boolean) - (Optional) Indicates if the script is fetched in parallel and evaluated as soon as possible. Defaults to `true`.
  - `integrity` (string) - (Optional) The integrity hash (SRI) of the Contentsquare script. Must be generated by Contentsquare.

**Returns**: The script element representing the Contentsquare script that was appended to `document.head`. Can be used for further manipulation or tracking loading state.

## Restrictions
* This bootstrap mode will only be available for the modern “Contentsquare Deployment” mode (no support for Clicktale or any other legacy modes).
* Some functions within the package will include inline descriptions/types for ease of use, but not all functionality is covered.  Please refer to the official [Contentsquare documentation](https://docs.contentsquare.com/uxa-en/) for more information on the available functions and their usage.

---

